# Migration `20200714225046-jo`

This migration has been generated by dev.mohe at 7/14/2020, 10:50:46 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Round" DROP CONSTRAINT "Round_studentId_fkey"

CREATE TABLE "public"."Runner" (
"clazz" text  NOT NULL ,
"grade" integer  NOT NULL ,
"id" text  NOT NULL ,
"name" text  NOT NULL ,
"startNumber" integer  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE UNIQUE INDEX "Runner.startNumber" ON "public"."Runner"("startNumber")

CREATE UNIQUE INDEX "Runner.name" ON "public"."Runner"("name")

ALTER TABLE "public"."Round" ADD FOREIGN KEY ("studentId")REFERENCES "public"."Runner"("id") ON DELETE CASCADE  ON UPDATE CASCADE

DROP TABLE "public"."Student";
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200714160832..20200714225046-jo
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource postgresql {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 // postgresql://postgres:postgres@localhost:5432/myapp
 // docker run --detach --publish 5432:5432 -e POSTGRES_PASSWORD=postgres --name postgres postgres:10.12
@@ -23,22 +23,22 @@
   role          UserRole
   createdRounds Round[]
 }
-model Student {
+model Runner {
   id          String  @default(cuid()) @id
   startNumber Int     @unique // @default(autoincrement()) // https://github.com/prisma/prisma2/issues/1938 https://github.com/graphql-nexus/nexus-plugin-prisma https://github.com/prisma/prisma2 has a bug autoincrement makes this the primary key
   name        String  @unique
   // maybe also password so they can login
   // then they may be like a user
-  class       String
+  clazz       String
   grade       Int
   rounds      Round[]
 }
 model Round {
   id          String  @default(cuid()) @id
-  student     Student @relation(fields: [studentId], references: [id])
+  student     Runner @relation(fields: [studentId], references: [id])
   studentId   String
   createdBy   User    @relation(fields: [createdById], references: [id])
   createdById String
   time        Int
```


