# Migration `watch-20200122205019`

This migration has been generated by dev.mohe at 1/22/2020, 8:50:26 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
PRAGMA foreign_keys=OFF;

CREATE TABLE "quaint"."new_User" (
  "id" TEXT NOT NULL   ,
  "name" TEXT NOT NULL DEFAULT ''  ,
  "password" TEXT NOT NULL DEFAULT ''  ,
  "role" TEXT NOT NULL DEFAULT 'ADMIN'  ,
  PRIMARY KEY ("id")
);

INSERT INTO "new_User" ("id","name","password","role") SELECT "id","name","password","role" from "User"

DROP TABLE "quaint"."User";

ALTER TABLE "quaint"."new_User" RENAME TO "User";

CREATE UNIQUE INDEX "quaint"."User.name" ON "User"("name")

PRAGMA "quaint".foreign_key_check;

PRAGMA foreign_keys=ON;

PRAGMA foreign_keys=OFF;

CREATE TABLE "quaint"."new_Student" (
  "class" TEXT NOT NULL DEFAULT ''  ,
  "grade" INTEGER NOT NULL DEFAULT 0  ,
  "id" TEXT NOT NULL   ,
  "name" TEXT NOT NULL DEFAULT ''  ,
  "startNumber" INTEGER    ,
  PRIMARY KEY ("id")
);

INSERT INTO "new_Student" ("class","grade","id","name","startNumber") SELECT "class","grade","id","name","startNumber" from "Student"

DROP TABLE "quaint"."Student";

ALTER TABLE "quaint"."new_Student" RENAME TO "Student";

CREATE UNIQUE INDEX "quaint"."Student.name" ON "Student"("name")

PRAGMA "quaint".foreign_key_check;

PRAGMA foreign_keys=ON;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration watch-20200119152821..watch-20200122205019
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "sqlite"
-  url = "***"
+  url      = "file:dev.db"
 }
 generator photon {
   provider = "photonjs"
@@ -21,10 +21,10 @@
   VIEWER
 }
 model Student {
-  id        String    @default(cuid()) @id
-  startNumber Int     @default(autoincrement())
+  id          String  @default(cuid()) @id
+  startNumber Int?    @default(autoincrement())
   name        String  @unique
   class       String
   grade       Int
   rounds      Round[]
```


