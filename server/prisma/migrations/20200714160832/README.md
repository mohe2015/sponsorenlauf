# Migration `20200714160832`

This migration has been generated by dev.mohe at 7/14/2020, 4:08:32 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."UserSession" (
"id" text  NOT NULL ,
"userId" text  NOT NULL ,
"validUntil" timestamp(3)  NOT NULL ,
    PRIMARY KEY ("id"))

ALTER TABLE "public"."UserSession" ADD FOREIGN KEY ("userId")REFERENCES "public"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200711010303-init..20200714160832
--- datamodel.dml
+++ datamodel.dml
@@ -1,8 +1,9 @@
 datasource postgresql {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
+
 // postgresql://postgres:postgres@localhost:5432/myapp
 // docker run --detach --publish 5432:5432 -e POSTGRES_PASSWORD=postgres --name postgres postgres:10.12
 generator prisma_client {
@@ -23,20 +24,29 @@
   createdRounds Round[]
 }
 model Student {
-  id            String   @default(cuid()) @id
-  startNumber   Int      @unique // @default(autoincrement()) // https://github.com/prisma/prisma2/issues/1938 https://github.com/graphql-nexus/nexus-plugin-prisma https://github.com/prisma/prisma2 has a bug autoincrement makes this the primary key
-  name          String   @unique
-  class         String
-  grade         Int
-  rounds        Round[]
+  id          String  @default(cuid()) @id
+  startNumber Int     @unique // @default(autoincrement()) // https://github.com/prisma/prisma2/issues/1938 https://github.com/graphql-nexus/nexus-plugin-prisma https://github.com/prisma/prisma2 has a bug autoincrement makes this the primary key
+  name        String  @unique
+  // maybe also password so they can login
+  // then they may be like a user
+  class       String
+  grade       Int
+  rounds      Round[]
 }
 model Round {
-  id           String    @default(cuid()) @id
-  student      Student   @relation(fields: [studentId], references: [id])
-  studentId    String
-  createdBy    User      @relation(fields: [createdById], references: [id])
-  createdById  String
-  time         Int
+  id          String  @default(cuid()) @id
+  student     Student @relation(fields: [studentId], references: [id])
+  studentId   String
+  createdBy   User    @relation(fields: [createdById], references: [id])
+  createdById String
+  time        Int
+}
+
+model UserSession {
+  id         String   @id
+  user       User     @relation(fields: [userId], references: [id])
+  userId     String
+  validUntil DateTime
 }
```


